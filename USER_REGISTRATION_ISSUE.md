# 사용자 등록 문제 해결 가이드

## 🔴 문제 상황

```
"존재하지 않는 사용자입니다. sellerId: 4474375438 (카카오 로그인을 먼저 진행해주세요.)"
```

## 🔍 원인 분석

### 문제
- 카카오 로그인은 성공했지만, 백엔드에 사용자가 등록되지 않았거나
- 프론트엔드에서 사용하는 `sellerId`가 잘못된 값일 수 있습니다

### 백엔드 동작 방식
1. 카카오 로그인 시 `POST /api/auth/kakao` 호출
2. 백엔드에서 카카오 사용자 정보를 가져옴
3. `saveOrUpdateUserProfile()` 메서드로 사용자 저장/업데이트
4. 백엔드 사용자 ID와 카카오 ID는 다를 수 있음

### 프론트엔드 동작 방식
- `localStorage`에 저장된 `profile.id`를 `sellerId`로 사용
- 이 값이 카카오 ID일 수도 있고, 백엔드 사용자 ID일 수도 있음

---

## ✅ 해결 방법

### 방법 1: 카카오 로그인 재시도 (가장 간단)

1. **로그아웃**
   - 브라우저 개발자 도구 → Application → Local Storage
   - `ssak3.accessToken`, `ssak3.profile`, `ssak3.refreshToken` 삭제

2. **카카오 로그인 다시 시도**
   - 로그인 페이지로 이동
   - 카카오 로그인 버튼 클릭
   - 콘솔에서 "✅ 카카오 로그인 응답:" 로그 확인
   - 사용자 등록이 정상적으로 완료되었는지 확인

### 방법 2: 백엔드 로그 확인

Render 대시보드에서:
1. 백엔드 서비스 → "Logs" 탭
2. 카카오 로그인 시도 시 로그 확인
3. "새 사용자 생성" 또는 "기존 사용자 정보 업데이트" 로그 확인
4. 오류가 있다면 백엔드 문제일 수 있음

### 방법 3: 백엔드 사용자 조회 API 확인

백엔드에 사용자가 등록되어 있는지 확인:
```
GET https://ssak3-backend-1.onrender.com/api/users/kakao/4474375438
```

응답이 404면 사용자가 등록되지 않은 것입니다.

---

## 🔧 백엔드 문제 가능성

### 가능한 원인
1. **데이터베이스 초기화**
   - Render에서 데이터베이스가 초기화되었을 수 있음
   - H2 메모리 DB를 사용하는 경우 재시작 시 데이터 삭제

2. **사용자 등록 실패**
   - 카카오 로그인 시 사용자 등록 중 오류 발생
   - 백엔드 로그에서 확인 필요

3. **ID 불일치**
   - 프론트엔드에서 카카오 ID를 사용
   - 백엔드에서 백엔드 사용자 ID를 기대

---

## 📝 확인 사항

### 프론트엔드 확인
1. **localStorage 확인**
   ```javascript
   // 개발자 도구 Console에서 실행
   const profile = JSON.parse(localStorage.getItem("ssak3.profile"));
   console.log("프로필:", profile);
   console.log("사용자 ID:", profile?.id);
   ```

2. **카카오 로그인 응답 확인**
   - 개발자 도구 → Console
   - "✅ 카카오 로그인 응답:" 로그 확인
   - `profile.id` 값 확인

### 백엔드 확인
1. **사용자 조회 API 호출**
   - 카카오 ID로 사용자 조회
   - 사용자가 등록되어 있는지 확인

2. **로그 확인**
   - Render 대시보드 → Logs
   - 카카오 로그인 시도 시 로그 확인

---

## 💡 임시 해결책

백엔드 문제가 확실한 경우:
1. **카카오 로그인 재시도**
   - 로그아웃 후 다시 로그인
   - 사용자 등록이 정상적으로 완료되는지 확인

2. **백엔드 재배포**
   - 백엔드 코드에 문제가 있을 수 있음
   - GitHub에 Push하여 재배포

---

## 🚨 다음 단계

1. **카카오 로그인 재시도**
2. **콘솔 로그 확인** ("✅ 카카오 로그인 응답:" 확인)
3. **백엔드 로그 확인** (Render 대시보드)
4. **사용자 조회 API 호출** (사용자 등록 여부 확인)

문제가 계속되면 백엔드 개발자에게 문의하거나 백엔드 로그를 확인해야 합니다.

